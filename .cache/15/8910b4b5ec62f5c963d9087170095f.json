{"id":"views/pages/editProfile.js","dependencies":[{"name":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/package.json","includedInParent":true,"mtime":1658560651828},{"name":"../../App","loc":{"line":1,"column":16,"index":16},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/App.js"},{"name":"lit-html","loc":{"line":2,"column":28,"index":56},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/node_modules/lit-html/lit-html.js"},{"name":"../../Router","loc":{"line":3,"column":37,"index":104},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/Router.js"},{"name":"../../Auth","loc":{"line":4,"column":17,"index":136},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/Auth.js"},{"name":"../../Utils","loc":{"line":5,"column":18,"index":167},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/Utils.js"},{"name":"./../../UserAPI","loc":{"line":6,"column":20,"index":201},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/UserAPI.js"},{"name":"../../Toast","loc":{"line":7,"column":18,"index":237},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/Toast.js"},{"name":"moment","loc":{"line":8,"column":19,"index":270},"parent":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/src/views/pages/editProfile.js","resolved":"/Users/kate/Documents/GitHub/cupcakebar-frontend-final/node_modules/moment/moment.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _App = _interopRequireDefault(require(\"../../App\"));\n\nvar _litHtml = require(\"lit-html\");\n\nvar _Router = require(\"../../Router\");\n\nvar _Auth = _interopRequireDefault(require(\"../../Auth\"));\n\nvar _Utils = _interopRequireDefault(require(\"../../Utils\"));\n\nvar _UserAPI = _interopRequireDefault(require(\"./../../UserAPI\"));\n\nvar _Toast = _interopRequireDefault(require(\"../../Toast\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nclass EditProfileView {\n  init() {\n    document.title = 'Edit Profile';\n    this.user = null;\n    this.render();\n\n    _Utils.default.pageIntroAnim();\n\n    this.getUser();\n  }\n\n  async getUser() {\n    try {\n      this.user = await _UserAPI.default.getUser(_Auth.default.currentUser._id);\n      this.render();\n    } catch (err) {\n      _Toast.default.show(err, 'error');\n    }\n  }\n\n  async updateProfileSubmitHandler(e) {\n    e.preventDefault();\n    const formData = e.detail.formData;\n    const submitBtn = document.querySelector('.submit-btn');\n    submitBtn.setAttribute('loading', '');\n\n    try {\n      const updatedUser = await _UserAPI.default.updateUser(_Auth.default.currentUser._id, formData);\n      delete updatedUser.password;\n      this.user = updatedUser;\n      _Auth.default.currentUser = updatedUser;\n      this.render();\n\n      _Toast.default.show('profile updated');\n    } catch (err) {\n      _Toast.default.show(err, 'error');\n    }\n\n    submitBtn.removeAttribute('loading');\n  }\n\n  render() {\n    const template = (0, _litHtml.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <cb-app-header user=\\\"\", \"\\\"></cb-app-header>\\n      <div class=\\\"page-content\\\">        \\n        \", \"\\n      </div>\\n      <cb-app-footer></cb-app-footer>     \\n    \"])), JSON.stringify(_Auth.default.currentUser), this.user == null ? (0, _litHtml.html)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n          <sl-spinner></sl-spinner>\\n        \"]))) : (0, _litHtml.html)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n          <sl-form class=\\\"page-form\\\" @sl-submit=\", \">\\n          <div class=\\\"editProfile\\\">\\n            <h1>Edit Profile</h1> \\n            <div class=\\\"input-group\\\">\\n              <sl-input label=\\\"Name\\\" type=\\\"text\\\" name=\\\"firstName\\\" value=\\\"\", \"\\\" placeholder=\\\"First Name\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-input label=\\\"Surname\\\" type=\\\"text\\\" name=\\\"lastName\\\" value=\\\"\", \"\\\" placeholder=\\\"Last Name\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-input label=\\\"Email\\\" type=\\\"text\\\" name=\\\"email\\\" value=\\\"\", \"\\\" placeholder=\\\"Email Address\\\"></sl-input>\\n            </div> \\n            <!-- <div class=\\\"input-group\\\">\\n\\n              <sl-input label=\\\"New Password\\\" type=\\\"text\\\" name=\\\"password\\\" placeholder=\\\"Password\\\" toggle-password></sl-input>\\n\\n            </div>            -->\\n            <div class=\\\"input-group\\\">\\n              <label>Avatar</label><br>          \\n              \", \"\\n            </div>\\n            <sl-button type=\\\"primary\\\" class=\\\"submit-btn\\\" submit>Update profile</sl-button>\\n            <p>Last updated: \", \"</p>\\n          </div>\\n          </sl-form>\\n        \"])), this.updateProfileSubmitHandler.bind(this), this.user.firstName, this.user.lastName, this.user.email, this.user.avatar ? (0, _litHtml.html)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n                <sl-avatar image=\\\"\", \"/images/\", \"\\\"></sl-avatar>\\n                <input type=\\\"file\\\" name=\\\"avatar\\\" />\\n              \"])), _App.default.apiBase, this.user.avatar) : (0, _litHtml.html)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n                <input type=\\\"file\\\" name=\\\"avatar\\\" />\\n              \"]))), (0, _moment.default)(_Auth.default.currentUser.updatedAt).format('MMMM Do YYYY, @ h:mm a')));\n    (0, _litHtml.render)(template, _App.default.rootEl);\n  }\n\n}\n\nvar _default = new EditProfileView();\n\nexports.default = _default;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"views/pages/editProfile.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"views/pages/editProfile.js","original":{"line":2,"column":0}},{"generated":{"line":12,"column":0},"source":"views/pages/editProfile.js","original":{"line":3,"column":0}},{"generated":{"line":14,"column":0},"source":"views/pages/editProfile.js","original":{"line":4,"column":0}},{"generated":{"line":16,"column":0},"source":"views/pages/editProfile.js","original":{"line":5,"column":0}},{"generated":{"line":18,"column":0},"source":"views/pages/editProfile.js","original":{"line":6,"column":0}},{"generated":{"line":20,"column":0},"source":"views/pages/editProfile.js","original":{"line":7,"column":0}},{"generated":{"line":22,"column":0},"source":"views/pages/editProfile.js","original":{"line":8,"column":0}},{"generated":{"line":30,"column":0},"source":"views/pages/editProfile.js","original":{"line":10,"column":0}},{"generated":{"line":30,"column":6},"source":"views/pages/editProfile.js","original":{"line":10,"column":6},"name":"EditProfileView"},{"generated":{"line":30,"column":21},"source":"views/pages/editProfile.js","original":{"line":10,"column":0}},{"generated":{"line":30,"column":22},"source":"views/pages/editProfile.js","original":{"line":10,"column":22}},{"generated":{"line":31,"column":2},"source":"views/pages/editProfile.js","original":{"line":11,"column":2},"name":"init"},{"generated":{"line":31,"column":6},"source":"views/pages/editProfile.js","original":{"line":11,"column":6}},{"generated":{"line":31,"column":9},"source":"views/pages/editProfile.js","original":{"line":11,"column":8}},{"generated":{"line":32,"column":4},"source":"views/pages/editProfile.js","original":{"line":12,"column":4},"name":"document"},{"generated":{"line":32,"column":12},"source":"views/pages/editProfile.js","original":{"line":12,"column":12}},{"generated":{"line":32,"column":13},"source":"views/pages/editProfile.js","original":{"line":12,"column":13},"name":"title"},{"generated":{"line":32,"column":18},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":21},"source":"views/pages/editProfile.js","original":{"line":12,"column":21}},{"generated":{"line":32,"column":35},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"generated":{"line":33,"column":4},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":33,"column":9},"source":"views/pages/editProfile.js","original":{"line":13,"column":9},"name":"user"},{"generated":{"line":33,"column":13},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":33,"column":16},"source":"views/pages/editProfile.js","original":{"line":13,"column":16}},{"generated":{"line":33,"column":20},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":34,"column":4},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"generated":{"line":34,"column":9},"source":"views/pages/editProfile.js","original":{"line":14,"column":9},"name":"render"},{"generated":{"line":34,"column":15},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"generated":{"line":36,"column":4},"source":"views/pages/editProfile.js","original":{"line":15,"column":4},"name":"Utils"},{"generated":{"line":36,"column":18},"source":"views/pages/editProfile.js","original":{"line":15,"column":4}},{"generated":{"line":36,"column":19},"source":"views/pages/editProfile.js","original":{"line":15,"column":10},"name":"pageIntroAnim"},{"generated":{"line":36,"column":32},"source":"views/pages/editProfile.js","original":{"line":15,"column":4}},{"generated":{"line":38,"column":4},"source":"views/pages/editProfile.js","original":{"line":16,"column":4}},{"generated":{"line":38,"column":9},"source":"views/pages/editProfile.js","original":{"line":16,"column":9},"name":"getUser"},{"generated":{"line":38,"column":16},"source":"views/pages/editProfile.js","original":{"line":16,"column":4}},{"generated":{"line":39,"column":2},"source":"views/pages/editProfile.js","original":{"line":17,"column":3}},{"generated":{"line":41,"column":2},"source":"views/pages/editProfile.js","original":{"line":19,"column":15}},{"generated":{"line":41,"column":8},"source":"views/pages/editProfile.js","original":{"line":19,"column":8},"name":"getUser"},{"generated":{"line":41,"column":15},"source":"views/pages/editProfile.js","original":{"line":19,"column":15}},{"generated":{"line":41,"column":18},"source":"views/pages/editProfile.js","original":{"line":19,"column":17}},{"generated":{"line":42,"column":4},"source":"views/pages/editProfile.js","original":{"line":20,"column":4}},{"generated":{"line":42,"column":8},"source":"views/pages/editProfile.js","original":{"line":20,"column":8}},{"generated":{"line":43,"column":6},"source":"views/pages/editProfile.js","original":{"line":21,"column":6}},{"generated":{"line":43,"column":11},"source":"views/pages/editProfile.js","original":{"line":21,"column":11},"name":"user"},{"generated":{"line":43,"column":15},"source":"views/pages/editProfile.js","original":{"line":21,"column":6}},{"generated":{"line":43,"column":18},"source":"views/pages/editProfile.js","original":{"line":21,"column":18}},{"generated":{"line":43,"column":24},"source":"views/pages/editProfile.js","original":{"line":21,"column":24},"name":"UserAPI"},{"generated":{"line":43,"column":40},"source":"views/pages/editProfile.js","original":{"line":21,"column":24}},{"generated":{"line":43,"column":41},"source":"views/pages/editProfile.js","original":{"line":21,"column":32},"name":"getUser"},{"generated":{"line":43,"column":48},"source":"views/pages/editProfile.js","original":{"line":21,"column":24}},{"generated":{"line":43,"column":49},"source":"views/pages/editProfile.js","original":{"line":21,"column":40},"name":"Auth"},{"generated":{"line":43,"column":62},"source":"views/pages/editProfile.js","original":{"line":21,"column":40}},{"generated":{"line":43,"column":63},"source":"views/pages/editProfile.js","original":{"line":21,"column":45},"name":"currentUser"},{"generated":{"line":43,"column":74},"source":"views/pages/editProfile.js","original":{"line":21,"column":40}},{"generated":{"line":43,"column":75},"source":"views/pages/editProfile.js","original":{"line":21,"column":57},"name":"_id"},{"generated":{"line":43,"column":78},"source":"views/pages/editProfile.js","original":{"line":21,"column":24}},{"generated":{"line":43,"column":79},"source":"views/pages/editProfile.js","original":{"line":21,"column":6}},{"generated":{"line":44,"column":6},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"generated":{"line":44,"column":11},"source":"views/pages/editProfile.js","original":{"line":22,"column":11},"name":"render"},{"generated":{"line":44,"column":17},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"generated":{"line":45,"column":4},"source":"views/pages/editProfile.js","original":{"line":23,"column":5}},{"generated":{"line":45,"column":5},"source":"views/pages/editProfile.js","original":{"line":20,"column":4}},{"generated":{"line":45,"column":6},"source":"views/pages/editProfile.js","original":{"line":23,"column":5}},{"generated":{"line":45,"column":13},"source":"views/pages/editProfile.js","original":{"line":23,"column":11},"name":"err"},{"generated":{"line":45,"column":16},"source":"views/pages/editProfile.js","original":{"line":23,"column":5}},{"generated":{"line":45,"column":18},"source":"views/pages/editProfile.js","original":{"line":23,"column":15}},{"generated":{"line":46,"column":6},"source":"views/pages/editProfile.js","original":{"line":24,"column":6},"name":"Toast"},{"generated":{"line":46,"column":20},"source":"views/pages/editProfile.js","original":{"line":24,"column":6}},{"generated":{"line":46,"column":21},"source":"views/pages/editProfile.js","original":{"line":24,"column":12},"name":"show"},{"generated":{"line":46,"column":25},"source":"views/pages/editProfile.js","original":{"line":24,"column":6}},{"generated":{"line":46,"column":26},"source":"views/pages/editProfile.js","original":{"line":24,"column":17},"name":"err"},{"generated":{"line":46,"column":29},"source":"views/pages/editProfile.js","original":{"line":24,"column":6}},{"generated":{"line":46,"column":31},"source":"views/pages/editProfile.js","original":{"line":24,"column":22}},{"generated":{"line":46,"column":38},"source":"views/pages/editProfile.js","original":{"line":24,"column":6}},{"generated":{"line":47,"column":4},"source":"views/pages/editProfile.js","original":{"line":25,"column":5}},{"generated":{"line":48,"column":2},"source":"views/pages/editProfile.js","original":{"line":26,"column":3}},{"generated":{"line":50,"column":2},"source":"views/pages/editProfile.js","original":{"line":28,"column":34}},{"generated":{"line":50,"column":8},"source":"views/pages/editProfile.js","original":{"line":28,"column":8},"name":"updateProfileSubmitHandler"},{"generated":{"line":50,"column":34},"source":"views/pages/editProfile.js","original":{"line":28,"column":34}},{"generated":{"line":50,"column":35},"source":"views/pages/editProfile.js","original":{"line":28,"column":35},"name":"e"},{"generated":{"line":50,"column":36},"source":"views/pages/editProfile.js","original":{"line":28,"column":34}},{"generated":{"line":50,"column":38},"source":"views/pages/editProfile.js","original":{"line":28,"column":37}},{"generated":{"line":51,"column":4},"source":"views/pages/editProfile.js","original":{"line":29,"column":4},"name":"e"},{"generated":{"line":51,"column":5},"source":"views/pages/editProfile.js","original":{"line":29,"column":5}},{"generated":{"line":51,"column":6},"source":"views/pages/editProfile.js","original":{"line":29,"column":6},"name":"preventDefault"},{"generated":{"line":51,"column":20},"source":"views/pages/editProfile.js","original":{"line":29,"column":4}},{"generated":{"line":52,"column":4},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"generated":{"line":52,"column":10},"source":"views/pages/editProfile.js","original":{"line":30,"column":10},"name":"formData"},{"generated":{"line":52,"column":18},"source":"views/pages/editProfile.js","original":{"line":30,"column":18}},{"generated":{"line":52,"column":21},"source":"views/pages/editProfile.js","original":{"line":30,"column":21},"name":"e"},{"generated":{"line":52,"column":22},"source":"views/pages/editProfile.js","original":{"line":30,"column":22}},{"generated":{"line":52,"column":23},"source":"views/pages/editProfile.js","original":{"line":30,"column":23},"name":"detail"},{"generated":{"line":52,"column":29},"source":"views/pages/editProfile.js","original":{"line":30,"column":21}},{"generated":{"line":52,"column":30},"source":"views/pages/editProfile.js","original":{"line":30,"column":30},"name":"formData"},{"generated":{"line":52,"column":38},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"generated":{"line":53,"column":4},"source":"views/pages/editProfile.js","original":{"line":31,"column":4}},{"generated":{"line":53,"column":10},"source":"views/pages/editProfile.js","original":{"line":31,"column":10},"name":"submitBtn"},{"generated":{"line":53,"column":19},"source":"views/pages/editProfile.js","original":{"line":31,"column":19}},{"generated":{"line":53,"column":22},"source":"views/pages/editProfile.js","original":{"line":31,"column":22},"name":"document"},{"generated":{"line":53,"column":30},"source":"views/pages/editProfile.js","original":{"line":31,"column":30}},{"generated":{"line":53,"column":31},"source":"views/pages/editProfile.js","original":{"line":31,"column":31},"name":"querySelector"},{"generated":{"line":53,"column":44},"source":"views/pages/editProfile.js","original":{"line":31,"column":22}},{"generated":{"line":53,"column":45},"source":"views/pages/editProfile.js","original":{"line":31,"column":45}},{"generated":{"line":53,"column":58},"source":"views/pages/editProfile.js","original":{"line":31,"column":22}},{"generated":{"line":53,"column":59},"source":"views/pages/editProfile.js","original":{"line":31,"column":4}},{"generated":{"line":54,"column":4},"source":"views/pages/editProfile.js","original":{"line":32,"column":4},"name":"submitBtn"},{"generated":{"line":54,"column":13},"source":"views/pages/editProfile.js","original":{"line":32,"column":13}},{"generated":{"line":54,"column":14},"source":"views/pages/editProfile.js","original":{"line":32,"column":14},"name":"setAttribute"},{"generated":{"line":54,"column":26},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"generated":{"line":54,"column":27},"source":"views/pages/editProfile.js","original":{"line":32,"column":27}},{"generated":{"line":54,"column":36},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"generated":{"line":54,"column":38},"source":"views/pages/editProfile.js","original":{"line":32,"column":38}},{"generated":{"line":54,"column":40},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"generated":{"line":56,"column":4},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":56,"column":8},"source":"views/pages/editProfile.js","original":{"line":33,"column":8}},{"generated":{"line":57,"column":6},"source":"views/pages/editProfile.js","original":{"line":34,"column":6}},{"generated":{"line":57,"column":12},"source":"views/pages/editProfile.js","original":{"line":34,"column":12},"name":"updatedUser"},{"generated":{"line":57,"column":23},"source":"views/pages/editProfile.js","original":{"line":34,"column":23}},{"generated":{"line":57,"column":26},"source":"views/pages/editProfile.js","original":{"line":34,"column":26}},{"generated":{"line":57,"column":32},"source":"views/pages/editProfile.js","original":{"line":34,"column":32},"name":"UserAPI"},{"generated":{"line":57,"column":48},"source":"views/pages/editProfile.js","original":{"line":34,"column":32}},{"generated":{"line":57,"column":49},"source":"views/pages/editProfile.js","original":{"line":34,"column":40},"name":"updateUser"},{"generated":{"line":57,"column":59},"source":"views/pages/editProfile.js","original":{"line":34,"column":32}},{"generated":{"line":57,"column":60},"source":"views/pages/editProfile.js","original":{"line":34,"column":51},"name":"Auth"},{"generated":{"line":57,"column":73},"source":"views/pages/editProfile.js","original":{"line":34,"column":51}},{"generated":{"line":57,"column":74},"source":"views/pages/editProfile.js","original":{"line":34,"column":56},"name":"currentUser"},{"generated":{"line":57,"column":85},"source":"views/pages/editProfile.js","original":{"line":34,"column":51}},{"generated":{"line":57,"column":86},"source":"views/pages/editProfile.js","original":{"line":34,"column":68},"name":"_id"},{"generated":{"line":57,"column":89},"source":"views/pages/editProfile.js","original":{"line":34,"column":32}},{"generated":{"line":57,"column":91},"source":"views/pages/editProfile.js","original":{"line":34,"column":73},"name":"formData"},{"generated":{"line":57,"column":99},"source":"views/pages/editProfile.js","original":{"line":34,"column":32}},{"generated":{"line":57,"column":100},"source":"views/pages/editProfile.js","original":{"line":34,"column":6}},{"generated":{"line":58,"column":6},"source":"views/pages/editProfile.js","original":{"line":35,"column":6}},{"generated":{"line":58,"column":13},"source":"views/pages/editProfile.js","original":{"line":35,"column":13},"name":"updatedUser"},{"generated":{"line":58,"column":24},"source":"views/pages/editProfile.js","original":{"line":35,"column":24}},{"generated":{"line":58,"column":25},"source":"views/pages/editProfile.js","original":{"line":35,"column":25},"name":"password"},{"generated":{"line":58,"column":33},"source":"views/pages/editProfile.js","original":{"line":35,"column":6}},{"generated":{"line":59,"column":6},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"generated":{"line":59,"column":11},"source":"views/pages/editProfile.js","original":{"line":36,"column":11},"name":"user"},{"generated":{"line":59,"column":15},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"generated":{"line":59,"column":18},"source":"views/pages/editProfile.js","original":{"line":36,"column":18},"name":"updatedUser"},{"generated":{"line":59,"column":29},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"generated":{"line":60,"column":6},"source":"views/pages/editProfile.js","original":{"line":37,"column":6},"name":"Auth"},{"generated":{"line":60,"column":19},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"generated":{"line":60,"column":20},"source":"views/pages/editProfile.js","original":{"line":37,"column":11},"name":"currentUser"},{"generated":{"line":60,"column":31},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"generated":{"line":60,"column":34},"source":"views/pages/editProfile.js","original":{"line":37,"column":25},"name":"updatedUser"},{"generated":{"line":60,"column":45},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"generated":{"line":61,"column":6},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"generated":{"line":61,"column":11},"source":"views/pages/editProfile.js","original":{"line":38,"column":11},"name":"render"},{"generated":{"line":61,"column":17},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"generated":{"line":63,"column":6},"source":"views/pages/editProfile.js","original":{"line":39,"column":6},"name":"Toast"},{"generated":{"line":63,"column":20},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"generated":{"line":63,"column":21},"source":"views/pages/editProfile.js","original":{"line":39,"column":12},"name":"show"},{"generated":{"line":63,"column":25},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"generated":{"line":63,"column":26},"source":"views/pages/editProfile.js","original":{"line":39,"column":17}},{"generated":{"line":63,"column":43},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"generated":{"line":64,"column":4},"source":"views/pages/editProfile.js","original":{"line":40,"column":5}},{"generated":{"line":64,"column":5},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":64,"column":6},"source":"views/pages/editProfile.js","original":{"line":40,"column":5}},{"generated":{"line":64,"column":13},"source":"views/pages/editProfile.js","original":{"line":40,"column":11},"name":"err"},{"generated":{"line":64,"column":16},"source":"views/pages/editProfile.js","original":{"line":40,"column":5}},{"generated":{"line":64,"column":18},"source":"views/pages/editProfile.js","original":{"line":40,"column":15}},{"generated":{"line":65,"column":6},"source":"views/pages/editProfile.js","original":{"line":41,"column":6},"name":"Toast"},{"generated":{"line":65,"column":20},"source":"views/pages/editProfile.js","original":{"line":41,"column":6}},{"generated":{"line":65,"column":21},"source":"views/pages/editProfile.js","original":{"line":41,"column":12},"name":"show"},{"generated":{"line":65,"column":25},"source":"views/pages/editProfile.js","original":{"line":41,"column":6}},{"generated":{"line":65,"column":26},"source":"views/pages/editProfile.js","original":{"line":41,"column":17},"name":"err"},{"generated":{"line":65,"column":29},"source":"views/pages/editProfile.js","original":{"line":41,"column":6}},{"generated":{"line":65,"column":31},"source":"views/pages/editProfile.js","original":{"line":41,"column":22}},{"generated":{"line":65,"column":38},"source":"views/pages/editProfile.js","original":{"line":41,"column":6}},{"generated":{"line":66,"column":4},"source":"views/pages/editProfile.js","original":{"line":42,"column":5}},{"generated":{"line":68,"column":4},"source":"views/pages/editProfile.js","original":{"line":43,"column":4},"name":"submitBtn"},{"generated":{"line":68,"column":13},"source":"views/pages/editProfile.js","original":{"line":43,"column":13}},{"generated":{"line":68,"column":14},"source":"views/pages/editProfile.js","original":{"line":43,"column":14},"name":"removeAttribute"},{"generated":{"line":68,"column":29},"source":"views/pages/editProfile.js","original":{"line":43,"column":4}},{"generated":{"line":68,"column":30},"source":"views/pages/editProfile.js","original":{"line":43,"column":30}},{"generated":{"line":68,"column":39},"source":"views/pages/editProfile.js","original":{"line":43,"column":4}},{"generated":{"line":69,"column":2},"source":"views/pages/editProfile.js","original":{"line":44,"column":3}},{"generated":{"line":71,"column":2},"source":"views/pages/editProfile.js","original":{"line":46,"column":2},"name":"render"},{"generated":{"line":71,"column":8},"source":"views/pages/editProfile.js","original":{"line":46,"column":8}},{"generated":{"line":71,"column":11},"source":"views/pages/editProfile.js","original":{"line":46,"column":10}},{"generated":{"line":72,"column":4},"source":"views/pages/editProfile.js","original":{"line":47,"column":4}},{"generated":{"line":72,"column":10},"source":"views/pages/editProfile.js","original":{"line":47,"column":10},"name":"template"},{"generated":{"line":72,"column":18},"source":"views/pages/editProfile.js","original":{"line":47,"column":18}},{"generated":{"line":72,"column":25},"source":"views/pages/editProfile.js","original":{"line":47,"column":21},"name":"html"},{"generated":{"line":72,"column":38},"source":"views/pages/editProfile.js","original":{"line":47,"column":18}},{"generated":{"line":72,"column":284},"source":"views/pages/editProfile.js","original":{"line":48,"column":29},"name":"JSON"},{"generated":{"line":72,"column":288},"source":"views/pages/editProfile.js","original":{"line":48,"column":33}},{"generated":{"line":72,"column":289},"source":"views/pages/editProfile.js","original":{"line":48,"column":34},"name":"stringify"},{"generated":{"line":72,"column":298},"source":"views/pages/editProfile.js","original":{"line":48,"column":29}},{"generated":{"line":72,"column":299},"source":"views/pages/editProfile.js","original":{"line":48,"column":44},"name":"Auth"},{"generated":{"line":72,"column":312},"source":"views/pages/editProfile.js","original":{"line":48,"column":44}},{"generated":{"line":72,"column":313},"source":"views/pages/editProfile.js","original":{"line":48,"column":49},"name":"currentUser"},{"generated":{"line":72,"column":324},"source":"views/pages/editProfile.js","original":{"line":48,"column":29}},{"generated":{"line":72,"column":325},"source":"views/pages/editProfile.js","original":{"line":47,"column":18}},{"generated":{"line":72,"column":327},"source":"views/pages/editProfile.js","original":{"line":50,"column":11}},{"generated":{"line":72,"column":332},"source":"views/pages/editProfile.js","original":{"line":50,"column":16},"name":"user"},{"generated":{"line":72,"column":336},"source":"views/pages/editProfile.js","original":{"line":50,"column":11}},{"generated":{"line":72,"column":340},"source":"views/pages/editProfile.js","original":{"line":50,"column":24}},{"generated":{"line":72,"column":344},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":351},"source":"views/pages/editProfile.js","original":{"line":50,"column":32},"name":"html"},{"generated":{"line":72,"column":364},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":490},"source":"views/pages/editProfile.js","original":{"line":52,"column":10},"name":"html"},{"generated":{"line":72,"column":503},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":1809},"source":"views/pages/editProfile.js","original":{"line":53,"column":50}},{"generated":{"line":72,"column":1814},"source":"views/pages/editProfile.js","original":{"line":53,"column":55},"name":"updateProfileSubmitHandler"},{"generated":{"line":72,"column":1840},"source":"views/pages/editProfile.js","original":{"line":53,"column":50}},{"generated":{"line":72,"column":1841},"source":"views/pages/editProfile.js","original":{"line":53,"column":82},"name":"bind"},{"generated":{"line":72,"column":1845},"source":"views/pages/editProfile.js","original":{"line":53,"column":50}},{"generated":{"line":72,"column":1846},"source":"views/pages/editProfile.js","original":{"line":53,"column":87}},{"generated":{"line":72,"column":1850},"source":"views/pages/editProfile.js","original":{"line":53,"column":50}},{"generated":{"line":72,"column":1851},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":1853},"source":"views/pages/editProfile.js","original":{"line":57,"column":75}},{"generated":{"line":72,"column":1858},"source":"views/pages/editProfile.js","original":{"line":57,"column":80},"name":"user"},{"generated":{"line":72,"column":1862},"source":"views/pages/editProfile.js","original":{"line":57,"column":75}},{"generated":{"line":72,"column":1863},"source":"views/pages/editProfile.js","original":{"line":57,"column":85},"name":"firstName"},{"generated":{"line":72,"column":1872},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":1874},"source":"views/pages/editProfile.js","original":{"line":60,"column":77}},{"generated":{"line":72,"column":1879},"source":"views/pages/editProfile.js","original":{"line":60,"column":82},"name":"user"},{"generated":{"line":72,"column":1883},"source":"views/pages/editProfile.js","original":{"line":60,"column":77}},{"generated":{"line":72,"column":1884},"source":"views/pages/editProfile.js","original":{"line":60,"column":87},"name":"lastName"},{"generated":{"line":72,"column":1892},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":1894},"source":"views/pages/editProfile.js","original":{"line":63,"column":72}},{"generated":{"line":72,"column":1899},"source":"views/pages/editProfile.js","original":{"line":63,"column":77},"name":"user"},{"generated":{"line":72,"column":1903},"source":"views/pages/editProfile.js","original":{"line":63,"column":72}},{"generated":{"line":72,"column":1904},"source":"views/pages/editProfile.js","original":{"line":63,"column":82},"name":"email"},{"generated":{"line":72,"column":1909},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":1911},"source":"views/pages/editProfile.js","original":{"line":72,"column":17}},{"generated":{"line":72,"column":1916},"source":"views/pages/editProfile.js","original":{"line":72,"column":22},"name":"user"},{"generated":{"line":72,"column":1920},"source":"views/pages/editProfile.js","original":{"line":72,"column":17}},{"generated":{"line":72,"column":1921},"source":"views/pages/editProfile.js","original":{"line":72,"column":27},"name":"avatar"},{"generated":{"line":72,"column":1927},"source":"views/pages/editProfile.js","original":{"line":72,"column":16}},{"generated":{"line":72,"column":1934},"source":"views/pages/editProfile.js","original":{"line":72,"column":37},"name":"html"},{"generated":{"line":72,"column":1947},"source":"views/pages/editProfile.js","original":{"line":72,"column":16}},{"generated":{"line":72,"column":2161},"source":"views/pages/editProfile.js","original":{"line":73,"column":36},"name":"App"},{"generated":{"line":72,"column":2173},"source":"views/pages/editProfile.js","original":{"line":73,"column":36}},{"generated":{"line":72,"column":2174},"source":"views/pages/editProfile.js","original":{"line":73,"column":40},"name":"apiBase"},{"generated":{"line":72,"column":2181},"source":"views/pages/editProfile.js","original":{"line":72,"column":16}},{"generated":{"line":72,"column":2183},"source":"views/pages/editProfile.js","original":{"line":73,"column":58}},{"generated":{"line":72,"column":2188},"source":"views/pages/editProfile.js","original":{"line":73,"column":63},"name":"user"},{"generated":{"line":72,"column":2192},"source":"views/pages/editProfile.js","original":{"line":73,"column":58}},{"generated":{"line":72,"column":2193},"source":"views/pages/editProfile.js","original":{"line":73,"column":68},"name":"avatar"},{"generated":{"line":72,"column":2199},"source":"views/pages/editProfile.js","original":{"line":72,"column":16}},{"generated":{"line":72,"column":2207},"source":"views/pages/editProfile.js","original":{"line":75,"column":17},"name":"html"},{"generated":{"line":72,"column":2220},"source":"views/pages/editProfile.js","original":{"line":72,"column":16}},{"generated":{"line":72,"column":2365},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":2367},"source":"views/pages/editProfile.js","original":{"line":80,"column":31}},{"generated":{"line":72,"column":2371},"source":"views/pages/editProfile.js","original":{"line":80,"column":31},"name":"moment"},{"generated":{"line":72,"column":2386},"source":"views/pages/editProfile.js","original":{"line":80,"column":31}},{"generated":{"line":72,"column":2388},"source":"views/pages/editProfile.js","original":{"line":80,"column":38},"name":"Auth"},{"generated":{"line":72,"column":2401},"source":"views/pages/editProfile.js","original":{"line":80,"column":38}},{"generated":{"line":72,"column":2402},"source":"views/pages/editProfile.js","original":{"line":80,"column":43},"name":"currentUser"},{"generated":{"line":72,"column":2413},"source":"views/pages/editProfile.js","original":{"line":80,"column":38}},{"generated":{"line":72,"column":2414},"source":"views/pages/editProfile.js","original":{"line":80,"column":55},"name":"updatedAt"},{"generated":{"line":72,"column":2423},"source":"views/pages/editProfile.js","original":{"line":80,"column":31}},{"generated":{"line":72,"column":2425},"source":"views/pages/editProfile.js","original":{"line":80,"column":66},"name":"format"},{"generated":{"line":72,"column":2431},"source":"views/pages/editProfile.js","original":{"line":80,"column":31}},{"generated":{"line":72,"column":2432},"source":"views/pages/editProfile.js","original":{"line":80,"column":73}},{"generated":{"line":72,"column":2456},"source":"views/pages/editProfile.js","original":{"line":80,"column":31}},{"generated":{"line":72,"column":2457},"source":"views/pages/editProfile.js","original":{"line":50,"column":10}},{"generated":{"line":72,"column":2458},"source":"views/pages/editProfile.js","original":{"line":47,"column":18}},{"generated":{"line":72,"column":2459},"source":"views/pages/editProfile.js","original":{"line":47,"column":4}},{"generated":{"line":73,"column":4},"source":"views/pages/editProfile.js","original":{"line":87,"column":4}},{"generated":{"line":73,"column":8},"source":"views/pages/editProfile.js","original":{"line":87,"column":4},"name":"render"},{"generated":{"line":73,"column":23},"source":"views/pages/editProfile.js","original":{"line":87,"column":4}},{"generated":{"line":73,"column":25},"source":"views/pages/editProfile.js","original":{"line":87,"column":11},"name":"template"},{"generated":{"line":73,"column":33},"source":"views/pages/editProfile.js","original":{"line":87,"column":4}},{"generated":{"line":73,"column":35},"source":"views/pages/editProfile.js","original":{"line":87,"column":21},"name":"App"},{"generated":{"line":73,"column":47},"source":"views/pages/editProfile.js","original":{"line":87,"column":21}},{"generated":{"line":73,"column":48},"source":"views/pages/editProfile.js","original":{"line":87,"column":25},"name":"rootEl"},{"generated":{"line":73,"column":54},"source":"views/pages/editProfile.js","original":{"line":87,"column":4}},{"generated":{"line":74,"column":2},"source":"views/pages/editProfile.js","original":{"line":88,"column":3}},{"generated":{"line":76,"column":0},"source":"views/pages/editProfile.js","original":{"line":10,"column":22}},{"generated":{"line":78,"column":15},"source":"views/pages/editProfile.js","original":{"line":92,"column":15}},{"generated":{"line":78,"column":19},"source":"views/pages/editProfile.js","original":{"line":92,"column":19},"name":"EditProfileView"},{"generated":{"line":78,"column":34},"source":"views/pages/editProfile.js","original":{"line":92,"column":15}}],"sources":{"views/pages/editProfile.js":"import App from '../../App'\nimport {html, render } from 'lit-html'\nimport {gotoRoute, anchorRoute} from '../../Router'\nimport Auth from '../../Auth'\nimport Utils from '../../Utils'\nimport UserAPI from './../../UserAPI'\nimport Toast from '../../Toast'\nimport moment from 'moment'\n\nclass EditProfileView {\n  init(){\n    document.title = 'Edit Profile'    \n    this.user = null\n    this.render()    \n    Utils.pageIntroAnim()\n    this.getUser()    \n  }\n\n  async getUser(){\n    try {\n      this.user = await UserAPI.getUser(Auth.currentUser._id)      \n      this.render()\n    }catch(err){\n      Toast.show(err, 'error')\n    }\n  }\n\n  async updateProfileSubmitHandler(e){\n    e.preventDefault()\n    const formData = e.detail.formData\n    const submitBtn = document.querySelector('.submit-btn')\n    submitBtn.setAttribute('loading', '')\n    try {\n      const updatedUser = await UserAPI.updateUser(Auth.currentUser._id, formData)      \n      delete updatedUser.password        \n      this.user = updatedUser     \n      Auth.currentUser = updatedUser\n      this.render()\n      Toast.show('profile updated')\n    }catch(err){      \n      Toast.show(err, 'error')\n    }\n    submitBtn.removeAttribute('loading')\n  }\n\n  render(){\n    const template = html`\n      <cb-app-header user=\"${JSON.stringify(Auth.currentUser)}\"></cb-app-header>\n      <div class=\"page-content\">        \n        ${(this.user == null) ? html`\n          <sl-spinner></sl-spinner>\n        `:html`\n          <sl-form class=\"page-form\" @sl-submit=${this.updateProfileSubmitHandler.bind(this)}>\n          <div class=\"editProfile\">\n            <h1>Edit Profile</h1> \n            <div class=\"input-group\">\n              <sl-input label=\"Name\" type=\"text\" name=\"firstName\" value=\"${this.user.firstName}\" placeholder=\"First Name\"></sl-input>\n            </div>\n            <div class=\"input-group\">\n              <sl-input label=\"Surname\" type=\"text\" name=\"lastName\" value=\"${this.user.lastName}\" placeholder=\"Last Name\"></sl-input>\n            </div>\n            <div class=\"input-group\">\n              <sl-input label=\"Email\" type=\"text\" name=\"email\" value=\"${this.user.email}\" placeholder=\"Email Address\"></sl-input>\n            </div> \n            <!-- <div class=\"input-group\">\n\n              <sl-input label=\"New Password\" type=\"text\" name=\"password\" placeholder=\"Password\" toggle-password></sl-input>\n\n            </div>            -->\n            <div class=\"input-group\">\n              <label>Avatar</label><br>          \n              ${(this.user.avatar) ? html`\n                <sl-avatar image=\"${App.apiBase}/images/${this.user.avatar}\"></sl-avatar>\n                <input type=\"file\" name=\"avatar\" />\n              `: html`\n                <input type=\"file\" name=\"avatar\" />\n              `}\n            </div>\n            <sl-button type=\"primary\" class=\"submit-btn\" submit>Update profile</sl-button>\n            <p>Last updated: ${moment(Auth.currentUser.updatedAt).format('MMMM Do YYYY, @ h:mm a')}</p>\n          </div>\n          </sl-form>\n        `}\n      </div>\n      <cb-app-footer></cb-app-footer>     \n    `\n    render(template, App.rootEl)\n  }\n}\n\n\nexport default new EditProfileView()"},"lineCount":null}},"error":null,"hash":"882fb2daa78c55ee985ea7861e451e5e","cacheData":{"env":{}}}